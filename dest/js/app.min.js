!function(e,t,s,r){"use strict";e.LY=e.LY||{},e.LY.version="0.0.1",t(function(){new LY.Router,Backbone.history.start()}),LY.namespace=function(e){var t,s,r=e.split("."),i=LY;for("LY"===r[0]&&(r=r.slice(1)),t=0,s=r.length;s>t;t++)"undefined"==typeof i[r[t]]&&(i[r[t]]={}),i=i[r[t]];return i};var i="static_page/",n="src/tpl/";LY.namespace("Helpers"),LY.Helpers.getTpl=function(e){var r=t("#"+e),i="";return r.length?i=r.html():t.ajax({url:n+e+".html",cache:!1,async:!1,dataType:"html",success:function(e){i=e}}),s.compile(i)},LY.Helpers.getStaticPage=function(e){var s="";return t.ajax({url:i+e+".html",cache:!1,async:!1,dataType:"html",success:function(e){s=e}}),s},LY.Helpers.getUrlOrigin=function(){var t=e.location;return t.origin||(t.origin=t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")),t.origin},LY.Helpers.getNameOfServer=function(){return-1!==e.location.host.indexOf("github")?"github":"others"},LY.Helpers.updateStarredInStorage=function(e,s){var i=[],n=JSON.parse(localStorage.getItem("starred"))||[],s=t.trim(s);if("add"===s){if(-1!==n.indexOf(e))return!1;n.push(e),i=n}else"remove"===s&&(i=r.without(n,e));return i.sort(function(e,t){return e-t}),localStorage.setItem("starred",JSON.stringify(i)),!0},s.registerHelper("declOfNum",function(e,t){var s=[2,0,1,1,1,2],r=t.split("/");return r[e%100>4&&20>e%100?2:s[5>e%10?e%10:5]]})}(window,jQuery,Handlebars,_),function(e,t,s,r){"use strict";LY.namespace("Models"),LY.Models.Course=r.Model.extend({defaults:{id:0,title:"",lang:"en",starred:!1},initialize:function(){var e=JSON.parse(localStorage.getItem("starred"));return e?void(-1!==e.indexOf(this.get("id"))&&this.set("starred",!0)):!1}}),LY.Models.Lesson=r.Model.extend({})}(window,jQuery,_,Backbone),function(e,t,s,r){"use strict";var i="/data/courses.json",n="github"===LY.Helpers.getNameOfServer()?LY.Helpers.getUrlOrigin()+"/learnyourself"+i:LY.Helpers.getUrlOrigin()+i;LY.namespace("Collections"),LY.Collections.Courses=r.Collection.extend({model:LY.Models.Course,url:n})}(window,jQuery,_,Backbone),function(e,t,s,r){"use strict";LY.namespace("Views"),LY.Views.Course=r.View.extend({tagName:"li",className:"courses_preview__item",tpl:LY.Helpers.getTpl("course_preview"),render:function(){return this.$el.html(this.tpl(this.model.toJSON())),this},events:{"click #starred":"toogleStarred"},toogleStarred:function(e){var s=t(e.currentTarget),r=+s.val(),i=s.data("flag"),n=LY.courses.original.get(r);this.model.get("starred")?(this.model.set("starred",!1),n.set("starred",!1)):(this.model.set("starred",!0),n.set("starred",!0)),LY.Helpers.updateStarredInStorage(r,i)?this.render():console.log("Something bad! Reload page")}}),LY.Views.Courses=r.View.extend({tagName:"ul",className:"courses_preview__list",render:function(){return this.$el.empty(),this.collection.each(function(e){var t=new LY.Views.Course({model:e});this.$el.append(t.render().el)},this),this},renderCourse:function(e){var t=new LY.Views.CoursePreview({model:e});this.$el.append(t.render().el)}}),LY.Views.Filters=r.View.extend({tagName:"aside",className:"filters",tpl:LY.Helpers.getTpl("filters"),render:function(){return this.$el.html(this.tpl()),this}}),LY.Views.IndexDirectory=r.View.extend({className:"index",tpl:LY.Helpers.getTpl("index_directory"),events:{"change #filterBylang":"setFilter"},initialize:function(){this.on("change:filterType",this.filterByType,this),LY.courses.on("reset",this.renderFilteredList,this)},render:function(){return this.$el.html(this.tpl()),this.$("#courses_preview").html(new LY.Views.Courses({collection:LY.courses}).render().el),this.$("#filters").html((new LY.Views.Filters).render().el),this},setFilter:function(e){this.filter=e.currentTarget.value,this.trigger("change:filterType")},filterByType:function(){if("all"===this.filter)LY.courses.reset(LY.courses.original.toJSON());else{var e=this.filter,t=s.filter(LY.courses.original.models,function(t){return t.get("lang")===e});LY.courses.reset(t)}console.log(LY.courses.toJSON())},renderFilteredList:function(){this.$("#courses_preview").html(new LY.Views.Courses({collection:LY.courses}).render().el)}}),LY.Views.CourseDetail=r.View.extend({className:"course_details",tpl:LY.Helpers.getTpl("course_detail"),render:function(){return this.$el.html(this.tpl(this.model.toJSON())),this}}),LY.Views.Lesson=r.View.extend({className:"lesson",tpl:LY.Helpers.getTpl("lesson"),render:function(){return this.$el.html(this.tpl(this.model.toJSON())),this}}),LY.Views.aboutPage=r.View.extend({tpl:"about",render:function(){var e=LY.Helpers.getStaticPage("about");return t(this.el).html(e),this}})}(window,jQuery,_,Backbone),function(e,t,s,r){"use strict";LY.namespace("Router"),LY.Router=r.Router.extend({$main:t(".j-main"),initialize:function(){LY.courses=new LY.Collections.Courses,LY.courses.fetch({async:!1}),LY.courses.original=LY.courses.clone()},loadView:function(e){return this.view&&this.view.remove(),this.view=e,this},updateView:function(e){this.loadView(e),this.$main.append(e.render().el)},routes:{"":"index","!/about(/)":"about","!/course/:idCourse(/)":"course","!/course/:idCourse/lesson/:idLesson":"lesson","*query":"default"},index:function(){var e=new LY.Views.IndexDirectory;this.updateView(e)},course:function(e){this.updateView(new LY.Views.CourseDetail({model:LY.courses.get(e)}))},lesson:function(e,t){var s=LY.courses.get(e),r=s.get("lessons")[t];this.updateView(new LY.Views.Lesson({model:new LY.Models.Lesson(r)}))},about:function(){this.updateView(new LY.Views.aboutPage)},"default":function(e){console.log("We don't know anythings about "+e)}})}(window,jQuery,_,Backbone);